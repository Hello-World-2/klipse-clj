["^ ","~:rename-macros",["^ "],"~:renames",["^ "],"~:externs",["^ ","~$Object",["^ "],"~$confirm",["^ "]],"~:use-macros",["^ ","~$starts-with?","~$clojure.string","~$go","~$cljs.core.async.macros","~$dbg","~$gadjett.core","~$go-loop","^9","~$emits","~$cljs.compiler","~$*source-map-data*","^>","~$emit","^>"],"~:excludes",["~#set",[]],"~:name","~$klipse-clj.lang.clojure.guard","~:imports",null,"~:requires",["^ ","~$ana","~$cljs.analyzer","^H","^H","~$s","^7","^7","^7","^>","^>","~$cljs.core.async","^I"],"~:cljs.spec/speced-vars",[],"~:uses",["^ ","~$timeout","^I","~$<!","^I","^6","^7","~$chan","^I","^=","^>","^?","^>","^@","^>","~$put!","^I"],"~:defs",["^ ","~$watchdog",["^ ","~:protocol-inline",null,"~:meta",["^ ","~:file","/Users/viebel/prj/klipse-clj/src/klipse_clj/lang/clojure/guard.cljs","~:line",47,"~:column",7,"~:end-line",47,"~:end-column",15,"~:arglists",["~#list",["~$quote",["^Z",[[]]]]]],"^C","~$klipse-clj.lang.clojure.guard/watchdog","^T","src/klipse_clj/lang/clojure/guard.cljs","^X",15,"~:method-params",["^Z",[[]]],"~:protocol-impl",null,"~:arglists-meta",["^Z",[null,null]],"^V",1,"~:variadic?",false,"^U",47,"~:ret-tag","~$any","^W",47,"~:max-fixed-arity",0,"~:fn-var",true,"^Y",["^Z",["^[",["^Z",[[]]]]]],"~$guard",["^ ","^R",null,"^S",["^ ","^T","/Users/viebel/prj/klipse-clj/src/klipse_clj/lang/clojure/guard.cljs","^U",52,"^V",3,"^W",52,"^X",8,"~:export",true,"^Y",["^Z",["^[",["^Z",[["~$max-eval-duration"]]]]]],"^C","~$klipse-clj.lang.clojure.guard/guard","^T","src/klipse_clj/lang/clojure/guard.cljs","^X",8,"^11",["^Z",[["^1;"]]],"^12",null,"^1:",true,"^13",["^Z",[null,null]],"^V",1,"^14",false,"^U",51,"^15",["^B",[null,"~$clj-nil"]],"^W",52,"^17",1,"^18",true,"^Y",["^Z",["^[",["^Z",[["^1;"]]]]]],"~$tick",["^ ","^R",null,"^S",["^ ","^T","/Users/viebel/prj/klipse-clj/src/klipse_clj/lang/clojure/guard.cljs","^U",33,"^V",7,"^W",33,"^X",11,"^Y",["^Z",["^[",["^Z",[[]]]]]],"^C","~$klipse-clj.lang.clojure.guard/tick","^T","src/klipse_clj/lang/clojure/guard.cljs","^X",11,"^11",["^Z",[[]]],"^12",null,"^13",["^Z",[null,null]],"^V",1,"^14",false,"^U",33,"^W",33,"^17",0,"^18",true,"^Y",["^Z",["^[",["^Z",[[]]]]]],"~$runonce",["^ ","^R",null,"^S",["^ ","^T","/Users/viebel/prj/klipse-clj/src/klipse_clj/lang/clojure/guard.cljs","^U",26,"^V",7,"^W",26,"^X",14,"^Y",["^Z",["^[",["^Z",[["~$f"]]]]]],"^C","~$klipse-clj.lang.clojure.guard/runonce","^T","src/klipse_clj/lang/clojure/guard.cljs","^X",14,"^11",["^Z",[["~$f"]]],"^12",null,"^13",["^Z",[null,null]],"^V",1,"^14",false,"^U",26,"^15","~$function","^W",26,"^17",1,"^18",true,"^Y",["^Z",["^[",["^Z",[["~$f"]]]]]],"~$run-watchdog*",["^ ","^R",null,"^S",["^ ","^T","/Users/viebel/prj/klipse-clj/src/klipse_clj/lang/clojure/guard.cljs","^U",36,"^V",7,"^W",36,"^X",20,"^Y",["^Z",["^[",["^Z",[[]]]]],"~:doc","reset the *watchdog-tick* to the current time once in a while"],"^C","~$klipse-clj.lang.clojure.guard/run-watchdog*","^T","src/klipse_clj/lang/clojure/guard.cljs","^X",20,"^11",["^Z",[[]]],"^12",null,"^13",["^Z",[null,null]],"^V",1,"^14",false,"^U",36,"^15","^16","^W",36,"^17",0,"^18",true,"^Y",["^Z",["^[",["^Z",[[]]]]],"^1D","reset the *watchdog-tick* to the current time once in a while"],"~$watchdog-period",["^ ","^S",["^ ","^T","/Users/viebel/prj/klipse-clj/src/klipse_clj/lang/clojure/guard.cljs","^U",24,"^V",3,"^W",24,"^X",18,"^1D","The number of msec for the watchdog period.\n            This value has to be much lower than min-max-eval-duration."],"^C","~$klipse-clj.lang.clojure.guard/watchdog-period","^T","src/klipse_clj/lang/clojure/guard.cljs","^X",18,"^V",1,"^U",22,"^W",24,"~:tag","~$number","^1D","The number of msec for the watchdog period.\n            This value has to be much lower than min-max-eval-duration."],"~$min-max-eval-duration",["^ ","^C","~$klipse-clj.lang.clojure.guard/min-max-eval-duration","^T","src/klipse_clj/lang/clojure/guard.cljs","^U",21,"^V",1,"^W",21,"^X",27,"^S",["^ ","^T","/Users/viebel/prj/klipse-clj/src/klipse_clj/lang/clojure/guard.cljs","^U",21,"^V",6,"^W",21,"^X",27],"^1H","^1I"],"~$run-watchdog-once",["^ ","^C","~$klipse-clj.lang.clojure.guard/run-watchdog-once","^T","src/klipse_clj/lang/clojure/guard.cljs","^U",45,"^V",1,"^W",45,"^X",23,"^S",["^ ","^T","/Users/viebel/prj/klipse-clj/src/klipse_clj/lang/clojure/guard.cljs","^U",45,"^V",6,"^W",45,"^X",23],"^1H","^1B"],"~$my-emits",["^ ","^R",null,"^S",["^ ","^T","/Users/viebel/prj/klipse-clj/src/klipse_clj/lang/clojure/guard.cljs","^U",59,"^V",7,"^W",59,"^X",15,"^Y",["^Z",["^[",["^Z",[["^1;","~$&","~$xs"]]]]],"^1D","same as cljs.compiler/emits with insertion of a `guard()` call before if and recur (emitted as continue) statement.\n\n  Limitations:\n  1. It doesn't prevent infinite loop in imported code e.g. (reduce + (range)\n  ","~:top-fn",["^ ","^14",true,"~:fixed-arity",1,"^17",1,"^11",[["^Z",["^1;","^1O"]]],"^Y",["^Z",[["^1;","~$&","^1O"]]],"^13",["^Z",[null]]]],"^C","~$klipse-clj.lang.clojure.guard/my-emits","^T","src/klipse_clj/lang/clojure/guard.cljs","^X",15,"^1P",["^ ","^14",true,"^1Q",1,"^17",1,"^11",[["^Z",["^1;","^1O"]]],"^Y",["^Z",[["^1;","~$&","^1O"]]],"^13",["^Z",[null]]],"^11",[["^Z",["^1;","^1O"]]],"^12",null,"^1Q",1,"^13",["^Z",[null]],"^V",1,"^14",true,"~:methods",[["^ ","^1Q",1,"^14",true,"^1H","^1="]],"^U",59,"^15","^16","^W",59,"^17",1,"^18",true,"^Y",["^Z",[["^1;","~$&","^1O"]]],"^1D","same as cljs.compiler/emits with insertion of a `guard()` call before if and recur (emitted as continue) statement.\n\n  Limitations:\n  1. It doesn't prevent infinite loop in imported code e.g. (reduce + (range)\n  "],"~$*watchdog-tick*",["^ ","^S",["^ ","^T","/Users/viebel/prj/klipse-clj/src/klipse_clj/lang/clojure/guard.cljs","^U",19,"^V",3,"^W",19,"^X",18,"^1D","each time the watchdog has a chance to run, this var is set with the current time","~:dynamic",true],"^C","~$klipse-clj.lang.clojure.guard/*watchdog-tick*","^T","src/klipse_clj/lang/clojure/guard.cljs","^X",18,"^V",1,"^1U",true,"^U",17,"^W",19,"^1H","^1I","^1D","each time the watchdog has a chance to run, this var is set with the current time"]],"~:cljs.spec/registry-ref",[],"~:require-macros",["^ ","~$gadjett","^;","^;","^;","^9","^9","^I","^I"],"~:cljs.analyzer/constants",["^ ","~:seen",["^B",["~:else","~:recur","~:gen-col"]],"~:order",["^21","^20","^22"]],"^1D","The basic idea is that the first time a klipse snippet's cljs is evaluated, we kick off a go-loop whose job is to wake up every 100ms and update *watchdog-tick* to say: this is the last time that i woke up!\n\n  And if (guard) gets run and notices that the watchdog hasn't been able to wake up within the last *max-eval-duration* milliseconds, it decides that we should kill the currently evaluating function, and does that by throwing an error.\n\n  and this doesn't kill go-loops created by users' snippet code, because those go-loops won't block the watchdog from running.\n  "]